<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kids Guardian</title>

  <!-- Manifest PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f4c81" />

  <!-- Ícones -->
  <link rel="icon" href="icons/icon-192.png" type="image/png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Login -->
  <main id="loginSection" class="login-section">
    <form id="formLogin" class="login-form">
      <h2>Fazer Login</h2>
      <div id="loginMessage" class="message"></div>

      <div class="form-group">
        <label for="inputLoginUsuario">Usuário</label>
        <div class="input-icon-group">
          <span class="icon">👤</span>
          <input type="text" id="inputLoginUsuario" placeholder="Digite seu usuário" required />
        </div>
      </div>

      <div class="form-group">
        <label for="inputLoginSenha">Senha</label>
        <div class="input-icon-group">
          <span class="icon">🔒</span>
          <input type="password" id="inputLoginSenha" placeholder="Digite sua senha" required />
        </div>
      </div>

      <button type="submit" class="btn btn-primary">Entrar</button>
    </form>
  </main>

  <!-- Dashboard -->
  <section id="dashboardSection" class="hidden">
    <header class="header">
      <h1>Kids Guardian</h1>
      <p>🏠 Ministério Infantil - Aliança</p>
      <div>
        Usuário: <span id="displayUsuarioLogado"></span>
        (<span id="displayCargoUsuario"></span>)
      </div>
      <button id="btnLogout" class="btn btn-danger">Sair</button>
    </header>

    <nav>
      <button id="btnAbrirCadastroCrianca" class="btn btn-primary">Cadastrar Criança</button>
      <button id="btnAbrirRelatorio" class="btn btn-info">Relatório do Dia</button>
      <button id="btnAbrirGerenciarUsuarios" class="btn btn-secondary admin-only" style="display:none;">Gerenciar Usuários</button>
    </nav>

    <section id="dashboardConteudo" class="dashboard">
      <div class="dashboard-grid">
        <div class="dashboard-panel check-io-lists">
          <div>
            <h2>Check-in</h2>
            <div id="checkinMessage" class="message"></div>
            <ul id="listaCheckin" class="crianca-list"></ul>
          </div>
          <div>
            <h2>Check-out</h2>
            <div id="checkoutMessage" class="message"></div>
            <ul id="listaCheckout" class="crianca-list"></ul>
          </div>
        </div>

        <div class="dashboard-panel stats-section">
          <h3>Estatísticas</h3>
          <div class="stats-grid">
            <div><p>Cadastradas</p><span id="statCadastradas">0</span></div>
            <div><p>Presentes Hoje</p><span id="statPresentes">0</span></div>
            <div><p>Check-ins</p><span id="statCheckins">0</span></div>
            <div><p>Check-outs</p><span id="statCheckouts">0</span></div>
          </div>
        </div>
      </div>
    </section>
  </section>

  <!-- Modal Cadastro Criança -->
  <div id="modalCadastroCrianca" class="modal hidden">
    <div class="modal-content">
      <span class="close-btn" data-close="modalCadastroCrianca">&times;</span>
      <h2>Cadastrar Criança</h2>
      <div id="messageCadastroCrianca" class="message"></div>
      <form id="formCadastroCrianca">
        <div class="form-group">
          <label for="inputCriancaNome">Nome</label>
          <input type="text" id="inputCriancaNome" placeholder="Nome" required />
        </div>
        <div class="form-group">
          <label for="inputCriancaResponsavel">Responsável</label>
          <input type="text" id="inputCriancaResponsavel" placeholder="Responsável" required />
        </div>
        <div class="form-group">
          <label for="inputCriancaNumero">Telefone</label>
          <input type="text" id="inputCriancaNumero" placeholder="Telefone" required />
        </div>
        <div class="form-group">
          <label for="inputCriancaIdade">Idade</label>
          <input type="number" id="inputCriancaIdade" placeholder="Idade" required />
        </div>
        <div class="form-group">
          <label for="inputCriancaSala">Sala</label>
          <select id="inputCriancaSala" required>
            <option value="">Selecione a sala</option>
            <option value="1">Sala 1 (0-3)</option>
            <option value="2">Sala 2 (4-6)</option>
            <option value="3">Sala 3 (7-9)</option>
            <option value="4">Sala 4 (10-12)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputCriancaObs">Observações</label>
          <textarea id="inputCriancaObs" placeholder="Observações"></textarea>
        </div>
        <button type="submit" class="btn btn-success">Salvar</button>
      </form>
    </div>
  </div>

  <!-- Modal Relatório -->
  <div id="modalRelatorio" class="modal hidden">
    <div class="modal-content">
      <span class="close-btn" data-close="modalRelatorio">&times;</span>
      <h2>Relatório do Dia</h2>
      <div id="messageRelatorio" class="message"></div>
      <div class="form-group">
        <label for="inputDataRelatorio">Data</label>
        <input type="date" id="inputDataRelatorio" required />
      </div>
      <button id="btnGerarRelatorio" class="btn btn-success">Gerar</button>
      <button id="btnExportarRelatorio" class="btn btn-secondary">Exportar</button>
      <pre id="relatorioConteudo" class="report-content"></pre>
    </div>
  </div>

  <!-- Modal Gerenciar Usuários -->
  <div id="modalGerenciarUsuarios" class="modal hidden">
    <div class="modal-content">
      <span class="close-btn" data-close="modalGerenciarUsuarios">&times;</span>
      <h2>Gerenciar Usuários</h2>
      <div id="messageUsuarios" class="message"></div>

      <!-- Cadastro de novo usuário -->
      <form id="formCadastroUsuario">
        <div class="form-group">
          <label for="inputUsuarioNome">Nome</label>
          <input type="text" id="inputUsuarioNome" placeholder="Nome" required />
        </div>
        <div class="form-group">
          <label for="inputUsuarioSenha">Senha</label>
          <input type="password" id="inputUsuarioSenha" placeholder="Senha" required />
        </div>
        <div class="form-group">
          <label for="inputUsuarioTipo">Tipo</label>
          <select id="inputUsuarioTipo" required>
            <option value="">Selecione o tipo</option>
            <option value="administrador">Administrador</option>
            <option value="voluntario">Voluntário</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Adicionar</button>
      </form>

      <!-- Lista de usuários já cadastrados -->
      <h3>Usuários Cadastrados</h3>
      <ul id="listaUsuarios" class="user-list"></ul>
    </div>
  </div>

  <!-- Modal Editar Usuário -->
  <div id="modalEditarUsuario" class="modal hidden">
    <div class="modal-content">
      <span class="close-btn" data-close="modalEditarUsuario">&times;</span>
      <h2>Editar Usuário</h2>
      <form id="formEditarUsuario">
        <div class="form-group">
          <label for="inputUsuarioEditNome">Nome</label>
          <input type="text" id="inputUsuarioEditNome" required />
        </div>
        <div class="form-group">
          <label for="inputUsuarioEditTipo">Tipo</label>
          <select id="inputUsuarioEditTipo" required>
            <option value="administrador">Administrador</option>
            <option value="voluntario">Voluntário</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputUsuarioEditSenha">Nova Senha (opcional)</label>
          <input type="password" id="inputUsuarioEditSenha" />
        </div>
        <button type="submit" class="btn btn-success">Salvar Alterações</button>
      </form>
    </div>
  </div>

  <!-- Botão Instalar PWA -->
  <div style="margin-top: 1rem; text-align: center;">
    <button id="btnInstalarApp" style="display: none;" class="btn btn-install">
      📲 Instalar App
    </button>
  </div>

  <!-- Scripts -->
  <script src="frontend.js"></script>
</body>
</html>
