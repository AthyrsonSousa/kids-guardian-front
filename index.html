<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="stylesheet" href="/style.css" />
  <link rel="icon" href="/icons/icon-192.png" type="image/png" />
  <title>Kids Guardian</title>
</head>
<body>
  <!-- Seção Login -->
  <main id="loginSection" class="centered">
    <form id="formLogin">
      <h2>Login</h2>
      <input type="email" id="inputLoginUsuario" placeholder="E-mail" required />
      <input type="password" id="inputLoginSenha" placeholder="Senha" required />
      <button type="submit" class="btn primary">Entrar</button>
      <div id="loginMessage" class="message"></div>
    </form>
  </main>

  <!-- Seção Dashboard -->
  <section id="dashboardSection" class="hidden">
    <header>
      <h1>Kids Guardian</h1>
      <div>
        Usuário: <span id="displayUsuarioLogado"></span> (<span id="displayCargoUsuario"></span>)
      </div>
      <button id="btnLogout" class="btn danger">Sair</button>
    </header>

    <nav>
      <button id="btnAbrirCadastroCrianca" class="btn">Cadastro de Criança</button>
      <button id="btnAbrirRelatorio" class="btn">Relatório</button>
      <button id="btnAbrirGerenciarUsuarios" class="btn admin-only" style="display:none;">Gerenciar Usuários</button>
    </nav>

    <!-- Modal Cadastro Criança -->
    <section id="modalCadastroCrianca" class="hidden modal">
      <h2>Cadastro de Criança</h2>
      <form id="formCadastroCrianca">
        <input type="text" id="inputCriancaNome" placeholder="Nome da Criança" required />
        <input type="text" id="inputCriancaResponsavel" placeholder="Responsável" required />
        <input type="text" id="inputCriancaNumero" placeholder="Telefone Responsável" required />
        <input type="number" id="inputCriancaIdade" placeholder="Idade" required />
        <input type="number" id="inputCriancaSala" placeholder="Sala" required />
        <textarea id="inputCriancaObs" placeholder="Observações"></textarea>
        <button type="submit" class="btn success">Cadastrar</button>
      </form>
      <button class="close-btn" data-close="modalCadastroCrianca">Fechar</button>
      <div id="messageCadastroCrianca" class="message"></div>
    </section>

    <!-- Modal Relatório -->
    <section id="modalRelatorio" class="hidden modal">
      <h2>Relatório de Check-ins</h2>
      <form id="formRelatorio">
        <input type="date" id="inputDataRelatorio" />
        <button type="submit" class="btn info">Gerar Relatório</button>
      </form>
      <div id="relatorioConteudo"></div>
      <button class="close-btn" data-close="modalRelatorio">Fechar</button>
    </section>

    <!-- Modal Gerenciamento de Usuários -->
    <section id="modalGerenciarUsuarios" class="hidden modal">
      <h2>Gerenciamento de Usuários</h2>
      <form id="formCadastroUsuario">
        <input type="text" id="inputUsuarioNome" placeholder="Nome do Usuário" required />
        <input type="password" id="inputUsuarioSenha" placeholder="Senha" required />
        <select id="inputUsuarioTipo" required>
          <option value="administrador">Administrador</option>
          <option value="usuario">Usuário</option>
        </select>
        <button type="submit" class="btn success">Cadastrar Usuário</button>
      </form>
      <ul id="listaUsuarios"></ul>
      <button class="close-btn" data-close="modalGerenciarUsuarios">Fechar</button>
      <div id="messageUsuarios" class="message"></div>
    </section>

    <!-- Listas Check-in / Check-out e estatísticas -->
    <section id="dashboardConteudo">
      <h2>Check-in</h2>
      <ul id="listaCheckin"></ul>
      <div id="checkinMessage" class="message"></div>

      <h2>Check-out</h2>
      <ul id="listaCheckout"></ul>
      <div id="checkoutMessage" class="message"></div>

      <h2>Estatísticas do Dia</h2>
      <ul>
        <li>Crianças Cadastradas: <span id="statCadastradas">0</span></li>
        <li>Presentes Hoje: <span id="statPresentes">0</span></li>
        <li>Check-ins Hoje: <span id="statCheckins">0</span></li>
        <li>Check-outs Hoje: <span id="statCheckouts">0</span></li>
      </ul>
    </section>
  </section>

  <!-- Prompt para Instalar PWA -->
  <div id="installPrompt" class="hidden">
    <button id="btnInstalarApp" class="btn">Instalar App</button>
  </div>

  <!-- Mensagem Global -->
  <div id="message" class="message hidden"></div>

  <script src="/frontend.js"></script>
</body>
</html>
