<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Kids Guardian - Sistema de Registro</title>

  <!-- Manifesto para PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#0f4c81" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Kids Guardian" />

  <!-- √çcones -->
  <link rel="icon" type="image/png" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">

    <header class="header" role="banner">
      <h1>KIDS GUARDIAN</h1>
      <p>üè† Minist√©rio Infantil - Alian√ßa</p>
    </header>

    <main class="main-content" role="main">

      <!-- Login Section -->
      <section id="loginSection" class="login-section" aria-label="Formul√°rio de Login">
        <form id="formLogin" class="login-form" autocomplete="on" novalidate>
          <h2 class="text-center text-success">Fazer Login</h2>
          <div id="loginMessage" class="message" role="alert" aria-live="assertive"></div>

          <div class="form-group">
            <label for="inputLoginUsuario">Usu√°rio</label>
            <div class="input-icon-group">
              <span class="icon" aria-hidden="true">üë§</span>
              <input
                type="text"
                id="inputLoginUsuario"
                name="usuario"
                required
                autocomplete="username"
                aria-required="true"
                placeholder="Digite seu usu√°rio"
              />
            </div>
          </div>

          <div class="form-group">
            <label for="inputLoginSenha">Senha</label>
            <div class="input-icon-group">
              <span class="icon" aria-hidden="true">üîí</span>
              <input
                type="password"
                id="inputLoginSenha"
                name="senha"
                required
                autocomplete="current-password"
                aria-required="true"
                placeholder="Digite sua senha"
              />
            </div>
          </div>

          <button type="submit" class="btn btn-primary" aria-label="Entrar no sistema">Entrar</button>
          <div id="loginLoading" class="loading-spinner visually-hidden" aria-live="polite" aria-hidden="true"></div>
        </form>
      </section>

      <!-- Dashboard Section (inicialmente escondido) -->
      <section id="dashboardSection" class="dashboard hidden" aria-label="Painel de Controle do Sistema" tabindex="-1">
        <div class="dashboard-header">
          <div class="user-info" aria-live="polite">
            <div id="displayUsuarioLogado"></div>
            <div id="displayCargoUsuario"></div>
          </div>
          <button id="btnLogout" class="btn btn-danger" aria-label="Sair do sistema">Sair</button>
        </div>

        <div class="dashboard-grid">

          <!-- Check-in / Check-out -->
          <div class="dashboard-panel check-io-lists" aria-label="Listas de check-in e check-out">

            <section aria-labelledby="tituloCheckin">
              <h2 id="tituloCheckin">Check-in</h2>
              <div id="checkinMessage" class="message" role="alert" aria-live="assertive"></div>
              <ul id="listaCheckin" class="crianca-list" aria-live="polite" aria-relevant="additions removals"></ul>
            </section>

            <section aria-labelledby="tituloCheckout">
              <h2 id="tituloCheckout">Check-out</h2>
              <div id="checkoutMessage" class="message" role="alert" aria-live="assertive"></div>
              <ul id="listaCheckout" class="crianca-list" aria-live="polite" aria-relevant="additions removals"></ul>
            </section>

          </div>

          <!-- Estat√≠sticas -->
          <div class="dashboard-panel stats-section" aria-label="Estat√≠sticas do sistema">
            <h3>Estat√≠sticas</h3>
            <div class="stats-grid">
              <div><p>Cadastradas</p><span id="statCadastradas">0</span></div>
              <div><p>Presentes Hoje</p><span id="statPresentes">0</span></div>
              <div><p>Check-ins</p><span id="statCheckins">0</span></div>
              <div><p>Check-outs</p><span id="statCheckouts">0</span></div>
            </div>
          </div>

          <!-- A√ß√µes -->
          <div class="dashboard-panel actions-section" aria-label="A√ß√µes do sistema">
            <h3>Gerenciar</h3>
            <button id="btnAbrirCadastroCrianca" class="btn btn-primary" aria-haspopup="dialog" aria-controls="modalCadastroCrianca">
              Cadastrar Crian√ßa
            </button>
            <button id="btnAbrirGerenciarUsuarios" class="btn btn-secondary" aria-haspopup="dialog" aria-controls="modalGerenciarUsuarios">
              Gerenciar Usu√°rios
            </button>
            <button id="btnAbrirRelatorio" class="btn btn-info" aria-haspopup="dialog" aria-controls="modalRelatorio">
              Relat√≥rio do Dia
            </button>
          </div>

        </div>

        <div class="text-center" style="margin-top: 1rem;">
          <button
            id="btnInstalarApp"
            class="btn btn-install"
            style="display: none;"
            aria-label="Instalar aplicativo"
          >
            üì≤ Instalar App
          </button>
        </div>
      </section>

    </main>
  </div>

  <!-- Modal Cadastro Crian√ßa -->
  <div id="modalCadastroCrianca" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="tituloCadastroCrianca" tabindex="-1">
    <div class="modal-content">
      <button class="close-btn" data-close="modalCadastroCrianca" aria-label="Fechar modal">&times;</button>
      <h2 id="tituloCadastroCrianca">Cadastrar Crian√ßa</h2>
      <div id="messageCadastroCrianca" class="message" role="alert" aria-live="assertive"></div>
      <form id="formCadastroCrianca" autocomplete="off" novalidate>
        <div class="form-group">
          <label for="inputCriancaNome">Nome</label>
          <input
            type="text"
            id="inputCriancaNome"
            name="nome"
            placeholder="Nome"
            required
            aria-required="true"
          />
        </div>
        <div class="form-group">
          <label for="inputCriancaResponsavel">Respons√°vel</label>
          <input
            type="text"
            id="inputCriancaResponsavel"
            name="responsavel"
            placeholder="Respons√°vel"
            required
            aria-required="true"
          />
        </div>
        <div class="form-group">
          <label for="inputCriancaNumero">Telefone</label>
          <input
            type="tel"
            id="inputCriancaNumero"
            name="telefone"
            placeholder="Telefone"
            required
            aria-required="true"
            pattern="[\d\s()+-]+"
            title="Digite um telefone v√°lido"
          />
        </div>
        <div class="form-group">
          <label for="inputCriancaIdade">Idade</label>
          <input
            type="number"
            id="inputCriancaIdade"
            name="idade"
            placeholder="Idade"
            required
            min="0"
            max="17"
            aria-required="true"
          />
        </div>
        <div class="form-group">
          <label for="inputCriancaSala">Sala</label>
          <select id="inputCriancaSala" name="sala" required aria-required="true">
            <option value="">Selecione a sala</option>
            <option value="1">Sala 1 (0-3)</option>
            <option value="2">Sala 2 (4-6)</option>
            <option value="3">Sala 3 (7-9)</option>
            <option value="4">Sala 4 (10-12)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="inputCriancaObs">Observa√ß√µes</label>
          <textarea id="inputCriancaObs" name="observacoes" placeholder="Observa√ß√µes" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Salvar</button>
      </form>
    </div>
  </div>

  <!-- Modal Gerenciar Usu√°rios -->
  <div id="modalGerenciarUsuarios" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="tituloGerenciarUsuarios" tabindex="-1">
    <div class="modal-content">
      <button class="close-btn" data-close="modalGerenciarUsuarios" aria-label="Fechar modal">&times;</button>
      <h2 id="tituloGerenciarUsuarios">Gerenciar Usu√°rios</h2>
      <div id="messageUsuarios" class="message" role="alert" aria-live="assertive"></div>
      <form id="formCadastroUsuario" autocomplete="off" novalidate>
        <div class="form-group">
          <label for="inputUsuarioNome">Nome</label>
          <input
            type="text"
            id="inputUsuarioNome"
            name="nome"
            placeholder="Nome"
            required
            aria-required="true"
          />
        </div>
        <div class="form-group">
          <label for="inputUsuarioSenha">Senha</label>
          <input
            type="password"
            id="inputUsuarioSenha"
            name="senha"
            placeholder="Senha"
            required
            aria-required="true"
            autocomplete="new-password"
            minlength="6"
            title="A senha deve ter no m√≠nimo 6 caracteres"
          />
        </div>
        <div class="form-group">
          <label for="inputUsuarioTipo">Tipo</label>
          <select id="inputUsuarioTipo" name="tipo" required aria-required="true">
            <option value="">Selecione o tipo</option>
            <option value="administrador">Administrador</option>
            <option value="voluntario">Volunt√°rio</option>
          </select>
        </div>
        <button type="submit" class="btn btn-primary">Adicionar</button>
      </form>
      <ul id="listaUsuarios" class="user-list" aria-live="polite" aria-relevant="additions removals"></ul>
    </div>
  </div>

  <!-- Modal Relat√≥rio -->
  <div id="modalRelatorio" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="tituloRelatorio" tabindex="-1">
    <div class="modal-content">
      <button class="close-btn" data-close="modalRelatorio" aria-label="Fechar modal">&times;</button>
      <h2 id="tituloRelatorio">Relat√≥rio do Dia</h2>
      <div id="messageRelatorio" class="message" role="alert" aria-live="assertive"></div>
      <form id="formRelatorio" novalidate>
        <div class="form-group">
          <label for="inputDataRelatorio">Data</label>
          <input
            type="date"
            id="inputDataRelatorio"
            name="dataRelatorio"
            required
            aria-required="true"
            max=""
          />
        </div>
        <div class="form-actions">
          <button id="btnGerarRelatorio" type="submit" class="btn btn-success">Gerar</button>
          <button id="btnExportarRelatorio" type="button" class="btn btn-secondary">Exportar</button>
        </div>
      </form>
      <pre id="relatorioConteudo" class="report-content" aria-live="polite"></pre>
    </div>
  </div>

  <!-- Script principal -->
  <script src="frontend.js" defer></script>
</body>
</html>
